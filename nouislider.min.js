angular.module("ya.nouislider",[]).value("noUiSliderConfig",{}).directive("noUiSlider",["noUiSliderConfig",function(a){function b(a){return angular.isUndefined(a)?0:angular.isArray(a)&&2==a.length?2:1}return a=a||{},{restrict:"A",require:"ngModel",scope:{noUiSlider:"=",noUiSliderLib:"=",noUiSliderEvents:"=",noUiSliderTrigger:"@"},link:function(c,d,e,f){function g(){var b=f.$viewValue,d=angular.extend({},a,c.noUiSlider,{start:b}),e=c.noUiSliderLib?c.noUiSliderLib:window.noUiSlider;console.log("init value",b),angular.isDefined(d.start)&&angular.isDefined(d.range)&&(i=angular.copy(b),h||(e.create(j,d),angular.forEach(c.noUiSliderEvents,function(a,b){j.noUiSlider.on(a,b)}),j.noUiSlider.on(c.noUiSliderTrigger||"update",function(a){a=j.noUiSlider.get();var b=angular.isArray(a);b&&(a=a[0]),a=parseFloat(a)||0,a=Math.min(Math.max(a,c.noUiSlider.range.min),c.noUiSlider.range.max),newValue=b?[a]:a,f.$setViewValue(newValue)})),h=!0)}var h=!1,i=void 0,j=d[0];c.$on("$destroy",function(){d.off("slide.noUiSlider set.noUiSlider change.noUiSlider")}),f.$render=function(a){if(h){var d=f.$viewValue,e=void 0;if(2==b(d)){d[0]=Math.max(d[0],c.noUiSlider.range.min),d[1]=Math.min(d[1],c.noUiSlider.range.max);var g=d[0]==i[0],k=d[1]==i[1];i=angular.copy(d),d[0]>d[1]&&(g&&(d[1]=d[0]),k&&(d[0]=d[1]),d[0]>d[1]&&(d[1]=d[0])),e=[g?null:d[0],k?null:d[1]]}else{var l=angular.isArray(d);l&&(d=d[0]),d=parseFloat(d)||0,d=Math.min(Math.max(d,c.noUiSlider.range.min),c.noUiSlider.range.max),e=l?[d]:d,f.$setViewValue(e)}j.noUiSlider.set(e)}},c.$watch(function(){return c.noUiSlider},function(){g()},!0),c.$watch(function(){return f.$viewValue},function(){f.$render(!0)},!0),c.$watch(function(){return b(f.$viewValue)},function(a){angular.isDefined(a)&&g()},!0)}}}]);